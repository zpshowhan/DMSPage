<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>日志管理</title>
    <link href="../../css/animate.min.css" rel="stylesheet">
    <link href="../../css/style.min862f.css?v=4.1.0" rel="stylesheet">
    <link href="../../css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
    <link href="../../css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
    <link href="../../css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
	<link href="../../css/plugins/sweetalert/sweetalert.css" rel="stylesheet">
    <link href="../../css/plugins/iCheck/custom.css" rel="stylesheet">

<style type="text/css">
.form-control {
	display: inline;
}
</style>
</head>

</head>

<body class="gray-bg">
    <div class="wrapper wrapper-content">
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">
				    <div class="ibox-title">
								<h5>行为日志</h5>
								<div class="ibox-tools">
									<a class="collapse-link"> <i class="fa fa-chevron-up"></i>
									</a>
									<a class="close-link"> <i class="fa fa-times"></i>
									</a>
								</div>
					</div>
                    <div class="ibox-content">
                       <div class="row">
									&nbsp;&nbsp;&nbsp;&nbsp; 模块： <select class="form-control m-b"
										name="account" style="width: 100px">
										<option>全部</option>
										<option>角色管理</option>
										<option>文档管理</option>
										<option>数字资产管理</option>
										<option>工作流管理</option>
										<option>日志管理</option>
										<option>消息管理</option>
									</select>&nbsp;&nbsp;&nbsp;&nbsp; 用户动作：
									 <select class="form-control m-b"
										name="account" style="width: 100px">
										<option>全部</option>
										<option>登录成功</option>
										<option>登录失败</option>
										<option>录入</option>
									</select>&nbsp;&nbsp;&nbsp;&nbsp; 风险等级： <select class="form-control m-b"
										name="account" style="width: 100px">
										<option>全部</option>
										<option>高</option>
										<option>中</option>
										<option>低</option>
									</select>&nbsp;&nbsp;&nbsp;&nbsp; 时间范围：<input placeholder="开始日期"
										class="form-control layer-date" id="start"
										style="width: 100px; vertical-align: middle;">- <input
										placeholder="结束日期" class="form-control layer-date" id="end"
										style="width: 100px; vertical-align: middle;">&nbsp;&nbsp;&nbsp;&nbsp;
									用户ID： <input type="text" class="form-control"
										style="width: 100px">&nbsp;&nbsp;&nbsp;&nbsp;
									<button type="button" class="btn btn-sm btn-primary"><i class='fa fa-search'></i>搜索</button>
						</div>
						<div class="ibox-content">
							<table id="logTable"></table>
					 </div>
                    </div>
                </div>
            </div>
        </div>
      </div>
      <script src="../../js/jquery.min.js?v=2.1.4"></script>
    <script src="../../js/bootstrap.min.js?v=3.3.6"></script>
    <script src="../../js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
    <script src="../../js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
    <script src="../../js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
	<script src="../../js/plugins/layer/layer.js"></script>
	<script src="../../js/plugins/sweetalert/sweetalert.min.js"></script>
	<script src="../../js/plugins/layer/laydate/laydate.js"></script>


	<script type="text/javascript">
		var data =[
    {
        "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
       "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
       "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
      "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
       "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
        "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
        "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
        "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
        "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
       "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
        "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
       "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
       "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
        "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
      "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
       "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
        "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
       "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
        "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
        "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
       "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
       "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    },
    {
       "module" : "工作流管理",
		"action" : "登陆成功",
		"logcontent":"用户登录成功",
		"ip" : "127.0.0.1",
		"recordtime" : "2016-12-07 12:45:56",
		"username":"4A系统管理员",
		"orgcode" : "交通部海事局",
		"dept" : "000015",
		"risklevel":"低"
    }];
		   $(function(){
		$("#logTable").bootstrapTable({
			//url: 'json/dev.json',
			data: data,
			height:"452",
			//toolbar: '#toolbar', //工具按钮用哪个容器
			//striped: true, //是否显示行间隔色
			//cache: false, //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
			pagination: true, //是否显示分页
			//sortable: true, //是否启用排序
			//sortOrder: "asc", //排序方式
			//queryParams: postQueryParams,//传递参数（*）
			//sidePagination: "client",      //分页方式：client客户端分页，server服务端分页（*）
			pageSize: 10, //每页的记录行数（*）
			pageList: [10, 25, 50, 100], //可供选择的每页的行数（*）
			//strictSearch: true,
			//height: table_h, //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度,设置了行高后编辑时标头宽度不会随着下面的行改变，且颜色也不会改变？？？？
			//uniqueId: "id", //每一行的唯一标识，一般为主键列
			//cardView: false, //是否显示详细视图
			//detailView: false, //是否显示父子表
			//paginationHAlign: "left",
			//singleSelect: true,
			//search:true,               //是否显示表格搜索，此搜索是客户端搜索，不会进服务端
			//strictSearch: true,
			//showColumns: true, //是否显示所有的列
			//showRefresh: true, //是否显示刷新按钮
			//clickToSelect: true, //是否启用点击选中行
			//paginationPreText: "<<",
			//paginationNextText: ">>",
			columns: [ {
					field : "order",
					title : "序号",
					width : 10,
					formatter: function (value, row, index) {
                              return index+1;
                          }
				}, {
					field : "module",
					title : "模块",
					width : 80
				}, {
					field : "action",
					title : "用户动作",
					width : 60
				},{
					field : "logcontent",
					title : "日志内容",
					width : 90
				},{
					field : "ip",
					title : "行为IP",
					width : 50
				}, {
					field : "recordtime",
					title : "记录时间",
					width : 130
				}, {
					field : "username",
					title : "用户名",
					width : 90,
				}, {
					field : "orgcode",
					title : "组织机构",
					width : 90,
				}, {
					field : "dept",
					title : "部门",
					width : 50
				}, {
					field : "risklevel",
					title : "风险等级",
					width : 30
				} ,
				{
				 field:"oper",
				 title:"操作",
				 width:190,
				 formatter:operateFormatter
				}],

		 });});

		  function operateFormatter(value, row, index) {
			return	["<button type='button' class='btn btn-sm btn-primary' onclick='delLog(1)'><i class='fa fa-remove'></i>删除</button>&nbsp;<button type='button' class='btn btn-sm btn-primary' onclick='copyLog(1)'><i class='fa fa-copy'></i>备份</button>&nbsp;<button type='button' class='btn btn-sm btn-primary' onclick='exportLog(1)'><i class='fa fa-external-link'></i>导出</button>", ].join(' ');
		}
		  var start = {
			elem : "#start",
			format : "YYYY/MM/DD hh:mm:ss",
			min : laydate.now(),
			max : "2099-06-16 23:59:59",
			istime : true,
			istoday : false,
			choose : function(datas) {
				end.min = datas;
				end.start = datas
			}
		};
		var end = {
			elem : "#end",
			format : "YYYY/MM/DD hh:mm:ss",
			min : laydate.now(),
			max : "2099-06-16 23:59:59",
			istime : true,
			istoday : false,
			choose : function(datas) {
				start.max = datas
			}
		};
		laydate(start);
		laydate(end);

		function delLog(i){
		   swal({
	        title: "您确定要删除这条信息吗",
	        text: "删除后将无法恢复，请谨慎操作！",
	        type: "warning",
	        showCancelButton: true,
	        confirmButtonColor: "#DD6B55",
	        confirmButtonText: "删除",
	        closeOnConfirm: false
	    }, function () {
	        swal("删除成功！", "您已经永久删除了这条信息。", "success");
	    });
		}

		function copyLog(i){
		   swal({
		   title: "输入日志名称",
		   //text: "输入日志名称",
		   type: "input",
		   showCancelButton: true,
		   closeOnConfirm: false,
		   animation: "slide-from-top",
		   inputPlaceholder: "日志名称"
		   }, function(inputValue){
		   if (inputValue === false) returnfalse;
		   if (inputValue === "") {
		   swal.showInputError("你需要输入日志名称！");
		   return false
		   }
		   swal("备份成功");
		   });

		}
	</script>
</body>
</html>
